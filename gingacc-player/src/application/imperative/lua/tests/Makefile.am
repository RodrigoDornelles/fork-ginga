# Makefile.am -- Template for generating Makefile via Automake.
#
# Copyright (C) 2006-2012 PUC-Rio/Laboratorio TeleMidia
#
# This program is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by the Free
# Software Foundation; either version 2 of the License, or (at your option)
# any later version.
#
# This program is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
# or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
# for more details.
#
# You should have received a copy of the GNU General Public License along
# with this program; if not, write to the Free Software Foundation, Inc., 51
# Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.

TESTS=                            \
  test-event-register.ncl         \
  test-event-register-edit.ncl    \
  test-event-register-ncl.ncl     \
  test-event-register-pointer.ncl \
  test-event-register-si.ncl      \
  test-event-register-sms.ncl     \
  test-event-register-tcp.ncl     \
  test-event-register-user.ncl    \
  test-event-unregister.ncl       \
  test-event-uptime.ncl           \
  test-event-timer.ncl

XFAIL_TESTS=
TESTS_ENVIRONMENT= $(srcdir)/run.sh

# Generate the NCL wrappers.
SUFFIXES=.lua .ncl
.lua.ncl:
	@ncl="$*.ncl"; TESTNAME="$*"; \
	echo "<!-- Generated by Makefile.  DO NOT EDIT.  -->" >$$ncl; \
	echo "<ncl id=\"$$TESTNAME\">" >>$$ncl; \
	echo "<head></head>" >>$$ncl; \
	echo "<body>" >>$$ncl; \
	echo "  <port id=\"start\" component=\"lua\"/>" >>$$ncl; \
	echo "  <media id=\"lua\" src=\"$$TESTNAME.lua\"/>" >>$$ncl; \
	echo "</body>" >>$$ncl; \
	echo "</ncl>" >>$$ncl;

clean-local:
	-rm -f $(TESTS)

MAINTAINERCLEANFILES= Makefile.in
